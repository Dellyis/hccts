{% extends "base.html" %}

{% block content %}
<div class="border mb-3 mx-auto flex p-3" style="max-width: 978px;">
    <h1 class="text-center py-2">–ö–æ–º–∞–Ω–¥–∞: {{ team.name }}</h1>
    <div class="d-flex flex-row justify-content-center gap-3">
        <h3 class="text-center">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
        {% if user.id == team.owner %}
        <button onclick="copyInvite()" class="btn btn-outline-primary btn-sm my-auto" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ">
            <i class="bi bi-link-45deg"></i>
        </button>
        {% endif %}
    </div>
    <div>
        {% for member in team_members %}
        <div class="border rounded p-3 my-2 mx-4 d-flex flex-row gap-1" style="height: 64px">
            <div class="my-auto">{{ member.name }}</div>
            {% if member.id == team.owner %}
            <div class="bg-primary rounded my-auto">üëë</div>
            {% elif user.id == team.owner %}
            <div style="margin-left: auto;"></div>
            <a href="/teams/{{ team.id }}/kick/{{ member.id }}" class="btn btn-outline-danger btn-sm" title="–ò—Å–∫–ª—é—á–∏—Ç—å">
                <i class="bi bi-x-lg"></i>
            </a>
            {% elif member.id == user.id %}
            <div style="margin-left: auto;"></div>
            <a href="/teams/{{ team.id }}/kick/{{ member.id }}?self=true" class="btn btn-outline-danger btn-sm"
                title="–ü–æ–∫–∏–Ω—É—Ç—å">
                <i class="bi bi-door-closed"></i>
            </a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% if user.id == team.owner %}
    <hr>
    <h3 class="text-center py-2">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
    {% endif %}
</div>

{% if user.id == team.owner %}
<script>
    function copyInvite() {
        let invite = "{{ host }}/teams/join/{{ team.invite }}"
        navigator.clipboard.writeText(invite)
            .then(() => {
                alert("–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ");
            })
            .catch(() => {
                alert("–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ :(");
            });

    }
</script>
{% endif %}
{% endblock content %}